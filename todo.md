# PsyRehab TODO List

> 코드 감사 보고서 기반 개선 사항 추적 문서
> 최종 업데이트: 2025-01-08

## 🚨 P1 - 즉시 수정 필요 (2주 내)

### 보안 크리티컬
- [ ] **하드코딩된 관리자 자격증명 제거**
  - `AssessmentService.loginAsAdmin()` 메서드에서 `admin@psyrehab.dev` / `admin123!` 제거
  - 해당 계정이 실제 존재하는 경우 비밀번호 즉시 변경
  - 테스트용 자동 로그인이 필요하면 환경변수 사용
  - 관련 파일: `src/services/assessmentService.ts`
  - **위험도**: 높음 - 운영 환경 침입 가능

### CI/CD 강화
- [ ] **CI 파이프라인에서 테스트 강제 실행**
  - GitHub Actions에서 `npm run ci:full` 사용하도록 수정
  - 테스트 실패 시 배포 중단되도록 설정
  - 현재 `npm run ci`는 빌드만 실행 → 테스트/린트 포함으로 변경
  - 파일: `.github/workflows/deploy.yml`
  - **현재 위험**: 버그가 있는 코드가 운영에 배포될 수 있음

- [ ] **브랜치 보호 규칙 설정**
  - main 브랜치 직접 푸시 금지
  - PR 필수, 최소 1명 리뷰 승인 필요
  - CI 체크 통과 필수

## 🔧 P2 - 중기 개선 (1개월 내)

### 코드 정리
- [ ] **레거시 백엔드 코드 제거**
  - Express 관련 문서 정리 (`RATE_LIMITING.md`, Express 미들웨어 참조)
  - `lib/security-logger.js` 등 사용하지 않는 서버 측 파일 삭제
  - Winston 기반 보안 로거 모듈 제거
  - `DBconnect.md`에서 Next.js App Router 백엔드 언급 수정
  - 사용하지 않는 `VITE_API_URL` 환경 변수 제거

- [ ] **테스트 파일 정리**
  - `archive_tests/` 디렉토리의 비활성화된 테스트 수정 또는 제거
  - `.skip`으로 표시된 테스트들 재활성화
  - 모든 테스트가 통과하도록 수정

### 의존성 관리
- [ ] **보안 취약점 패치**
  - `npm audit fix`로 brace-expansion 취약점 해결
  - React 19 안정성 확인 (현재 실험 버전 사용 중)
  
- [ ] **Node 버전 고정**
  - package.json에 engines 필드 추가
  - `.nvmrc` 파일 생성 (Node 18.x)

### 개발 프로세스
- [ ] **기여 가이드라인 작성**
  - `CONTRIBUTING.md` 생성
  - Conventional Commits 규칙 정의
  - 브랜치 전략 문서화
  - 코드 리뷰 프로세스 정의

- [ ] **Git 워크플로우 개선**
  - Feature branch 전략 문서화
  - PR 템플릿 생성
  - 코드 리뷰 문화 정착

### 보안 강화
- [ ] **클라이언트 사이드 보안 개선**
  - 현재 localStorage 기반 속도 제한은 우회 가능 → 문서화된 UX 목적임을 명시
  - 중요한 보안 제어는 Supabase RLS 또는 Edge Functions로 이관 검토
  - 관리자 작업에 대한 추가 인증 고려

- [ ] **에러 처리 개선**
  - `console.error` → 사용자 알림 (토스트) 변경
  - 운영 환경 에러 모니터링 서비스 통합 (Sentry 등)
  - 민감한 정보가 포함된 에러 메시지 필터링

## 📚 P2 - 문서화 개선 (1개월 내)

### 다국어 지원
- [ ] **핵심 문서 영문화**
  - `README_EN.md` 생성 또는 README 내 영문 섹션 추가
  - `SECURITY_AUDIT.md` 영문 요약 제공
  - 주요 용어집 (한글-영문) 작성

### 아키텍처 문서
- [ ] **시각적 문서 추가**
  - 시스템 아키텍처 다이어그램 (React → Supabase → N8N)
  - 데이터베이스 ERD 시각화
  - 사용자 권한 매트릭스 도표

- [ ] **문서 현행화**
  - DBconnect.md에서 Next.js 백엔드 참조 제거
  - RATE_LIMITING.md 업데이트 (Express 제거 반영)

### 테스트 인프라
- [ ] **기존 테스트 정비**
  - E2E 테스트 프레임워크 설정 (현재 미구성)
  - 각 페이지별 스모크 테스트 추가

## 🧪 P3 - 장기 개선 (3-6개월)

### 테스트 확장
- [ ] **테스트 커버리지 80% 목표**
  - 목표 완료 로직 단위 테스트
  - AI 추천 워크플로우 테스트 (webhook 응답 모킹)
  - 역할 기반 접근 제어 테스트
  - 각 서비스 클래스별 테스트 추가

- [ ] **E2E 테스트 구현**
  - Playwright 또는 Cypress 설정
  - 주요 사용자 여정 테스트:
    - 관리자 가입 승인 프로세스
    - 사회복지사 환자 목표 생성
    - 환자 목표 완료 체크인
  - CI에서 E2E 테스트 실행

### 성능 최적화
- [ ] **성능 모니터링**
  - Lighthouse 점수 모니터링 (목표: 90점 이상)
  - 대용량 데이터셋 지연 로딩
  - React Query 캐싱 전략 최적화
  - AI 추천 생성 시 백그라운드 처리 또는 사용자 알림
  - 번들 크기 분석 및 최적화

### 아키텍처 확장
- [ ] **서버리스 백엔드 검토**
  - 복잡한 리포트 생성용 API 서버 필요성 평가
  - Supabase Edge Functions 또는 Next.js API 라우트 도입 검토
  - 타사 서비스 통합을 위한 백엔드 컴포넌트 설계
  - 복잡한 비즈니스 로직 서버 이동 검토

### 컴플라이언스
- [ ] **의료 데이터 규정 준수**
  - 다중 인증(MFA) 구현
  - 감사 로깅 시스템 구축
  - 자동 세션 타임아웃
  - 더 강력한 비밀번호 정책 시행
  - 환자 데이터 암호화 검토
  - HIPAA/의료정보보호 규정 검토

- [ ] **데이터 보호**
  - 민감 데이터 암호화 강화
  - 백업 및 복구 프로세스 구축
  - 데이터 보존 정책 수립

### 기능 고도화
- [ ] **AI 기능 개선**
  - AI 추천 정확도 모니터링
  - 사용자 피드백 수집 시스템
  - 추천 알고리즘 개선

- [ ] **국제화(i18n)**
  - 다국어 지원 인프라 구축
  - 사용자 인터페이스 영문화
  - 날짜/시간/숫자 형식 현지화

### 인프라 및 모니터링
- [ ] **스테이징 환경 구축**
  - 프로덕션과 동일한 스테이징 환경
  - 자동 배포 파이프라인
  - 환경별 설정 관리

- [ ] **모니터링 및 분석**
  - 에러 추적 시스템 (Sentry) 도입
  - 사용자 행동 분석 도구
  - 성능 모니터링 대시보드
  - 접근성 테스트 자동화

### 확장성
- [ ] **마이크로서비스 검토**
  - 보고서 생성 서비스 분리
  - 알림 서비스 독립화
  - API Gateway 도입 검토

- [ ] **데이터베이스 최적화**
  - 인덱스 최적화
  - 쿼리 성능 분석
  - 읽기 전용 복제본 검토

### 커뮤니티 준비
- [ ] **오픈소스화 준비** (선택사항)
  - 이슈 템플릿 작성
  - PR 템플릿 작성
  - 행동 강령(Code of Conduct) 수립
  - 라이선스 선택 및 적용

## 🔄 지속적 관리

### 정기 유지보수
- [ ] **주간 작업**
  - 의존성 업데이트 확인
  - 보안 취약점 스캔
  - 성능 메트릭 검토

- [ ] **월간 작업**
  - 전체 테스트 스위트 실행
  - 문서 현행화 검토
  - 사용자 피드백 분석
  - 의존성 보안 감사 (`npm audit`)
  - 주요 라이브러리 업데이트 검토

- [ ] **분기별 작업**
  - 주요 의존성 업그레이드
  - 전체 보안 감사 실시
  - 아키텍처 확장성 검토

## 📊 성공 지표

### 단기 목표 (2주)
- [ ] 보안 취약점 0개
- [ ] CI 파이프라인에서 테스트 실패 시 배포 중단 확인

### 중기 목표 (1개월)
- [ ] 모든 테스트 통과
- [ ] 코드 리뷰 프로세스 정착
- [ ] 문서화 완성도 90%

### 장기 목표 (6개월)
- [ ] 테스트 커버리지 80% 달성
- [ ] E2E 테스트 커버리지 주요 플로우 100%
- [ ] 성능 점수 90점 이상 유지
- [ ] 보안 컴플라이언스 인증 획득

---

## ✅ 완료된 항목

### 2025-01-08
- [x] 공지사항 UI 개선 - 전체 내용 보기 기능 추가

---

## 🎯 다음 스프린트 권장 작업
**P1 전체 + P2의 코드 정리 섹션**

---

**우선순위 범례:**
- **P1**: 즉시 수정 필요 (보안/안정성 위험)
- **P2**: 중기 개선 (개발 효율성/품질 향상)  
- **P3**: 장기 개선 (확장성/사용성 향상)

> 이 문서는 정기적으로 업데이트되어야 합니다.
> 각 항목 완료 시 체크박스를 표시하고 완료 날짜를 기록하세요.